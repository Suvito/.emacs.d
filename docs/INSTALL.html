<h1 id="installation-guide">Installation Guide</h1>
<p>假设你的机器上有 名为 <em>shynur</em> 的用户, 他将 Emacs 安装在
<code>c:/Users/shynur/bin/</code> 目录下.</p>
<div class="contents">

</div>
<h2 id="download">Download</h2>
<h3 id="from-repository">From repository</h3>
<p>将 <a href="https://github.com/shynur/.emacs.d">本仓库</a> 解压至
<code>c:/Users/shynur/</code> (或 类似
<code>c:/Users/shynur/.config/</code> 的 XDG-兼容 位置, see <a
href="https://gnu.org/s/emacs/manual/html_node/emacs/Find-Init.html">How
Emacs Finds Your Init File</a>), 确保能看到
<code>c:/Users/shynur/.emacs.d/INSTALL.rst</code> (this file). (如果
安装在 XDG-compatible 位置, 则需要修改目录名, 确保存在类似
<code>c:/Users/shynur/.config/emacs/INSTALL.rst</code> 的路径.)</p>
<p>(下文所有提及的相对路径, 都是基于
<code>c:/Users/shynur/.emacs.d/</code> 目录.)</p>
<h3 id="out-of-the-box-optional">Out of the box (Optional)</h3>
<p>也可以直接下载我本地编译好的配置, 见 <a
href="./README.org">README.org</a>. 但是会小概率出现不兼容现象,
并且我不会及时更新它.</p>
<h3 id="place-site-wide-libraries">Place site-wide libraries</h3>
<p>将 <code>site-lisp/</code> 下的所有文件及子目录移动到
<code>c:/Users/shynur/bin/emacs-VERSION/share/emacs/site-lisp/</code>
(在 GNU-like 系统上, 是像 <code>/usr/local/share/emacs/site-lisp/</code>
的目录).</p>
<p>如果有重复文件, 请自行判断是否要‘替换’或‘跳过’, 总之不影响结果.</p>
<h2 id="configure">Configure</h2>
<h3 id="customize">Customize</h3>
<p>编辑 <code>etc/shynur-custom.el</code> 文件进行本地化配置.
(这应当不需要 Emacs Lisp 知识.)</p>
<h3 id="requisites">Requisites</h3>
<p><a href="./README.org#prerequisites">README.org</a> 中列出了依赖项目,
其中, 字体 是必须的.</p>
<h2 id="compile">Compile</h2>
<h3 id="环境变量-optional">环境变量 (Optional)</h3>
<p>在 MS-Windows 上, 需要显式地指出用户的 HOME 目录 (see <a
href="https://gnu.org/s/emacs/manual/html_mono/efaq-w32.html#Location-of-init-file">Where
do I put my init file?</a>):</p>
<p>设置 -&gt; 系统信息 -&gt; 高级系统设置 -&gt; 环境变量 -&gt; 新建
(<em>shynur</em> 的用户变量), 将变量 <code>HOME</code> 设为
<code>C:/Users/shynur/</code>.</p>
<h3 id="fetch-packages">Fetch Packages</h3>
<p>从各类 ELPA 网站上获取 Emacs packages, 请确保你有正常的网络环境.</p>
<p>执行如下命令:</p>
<pre><code>PS C:\Users\shynur&gt; ./bin/emacs-VERSION/bin/runemacs.exe</code></pre>
<p>等到 Emacs 空闲下来 (自己判断) 后, <strong>关闭</strong> 窗口.</p>
<p>此时, 应该能看到类似 <code>.appdata/elpa/</code> 的路径,
该目录下是编译好的 package.</p>
<h3 id="compile-configuration-files-optional">Compile configuration
files (Optional)</h3>
<h4 id="byte-compile-emacs-lisp-files">Byte-compile Emacs Lisp
files</h4>
<p>有些配置文件也可以编译 (反正我懒得编译), see <a
href="./.dir-locals.el">.dir-locals.el</a>.</p>
<h4
id="动态链接库-perhaps-required-at-some-point-in-the-future">动态链接库
(perhaps Required at some point in the future)</h4>
<p>在 <code>.emacs.d/modules/src/</code> 下有名如
<code>shynur-*.c</code> 的 C 文件, 参见 <a
href="./modules/src/shynur-hello.c">modules/src/shynur-hello.c</a>
中提示的编译指令. 编译后会在 <code>modules/</code> 下生成动态链接库,
例如 <code>modules/shynur-hello.dll</code>
(其中的模块函数演示了一个简单的柯里化概念, 可以编译下来玩玩).</p>
<h2 id="test">Test</h2>
<h3 id="start-process">Start process</h3>
<p>执行如下命令:</p>
<pre><code>PS C:\Users\shynur&gt; ./bin/emacs-VERSION/bin/emacsclientw.exe --server-file=c:/Users/shynur/.emacs.d/.appdata/server-auth-dir/server-name.txt --alternate-editor=&quot;&quot; --create-frame</code></pre>
<p>此时 Emacs 首先在后台创建了一个 daemon (see <a
href="./docs/Emacs-use_daemon.md">如何运行 Emacs 作为后台服务进程?</a>),
然后 (耐心点) 会弹出一个窗口, 默认会打开 <code>init.el</code> 文件.</p>
<h3 id="create-frame">Create frame</h3>
<p>将当前窗口关闭, 再次运行上一节提到的命令, Emacs 会瞬间
(在我的电脑上是 0.7s) 启动. 这是因为关闭窗口并没有结束 Emacs 的进程,
Emacs 将会一直驻留在后台.</p>
<h2 id="善后">善后</h2>
<p>基本上没有需要清理的中间文件. 但如果你想从头开始安装的话, 请:</p>
<pre><code>~/.emacs.d $ make clean</code></pre>
